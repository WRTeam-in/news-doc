"use strict";(self.webpackChunknews_app_documentation=self.webpackChunknews_app_documentation||[]).push([[5721],{211:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/port_occupy-358ddb7bd604601c9abd659899cc7427.png"},2055:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/htaccess_file-1a15348b783776643cb09a294ece001a.png"},3087:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/available_port-a7b70599d1defb9bce070c6b6e71d7e8.png"},3579:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/package_json-7a715c761c6902d60852e6452b38a07f.png"},4339:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"web/nextjsdeploy","title":"NextJS Deployment","description":"Port Configuration","source":"@site/docs/web/nextjsdeploy.md","sourceDirName":"web","slug":"/web/nextjsdeploy","permalink":"/news-doc/docs/web/nextjsdeploy","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":13,"frontMatter":{"sidebar_position":13},"sidebar":"tutorialSidebar","previous":{"title":"Deploy the Site WITH SEO","permalink":"/news-doc/docs/web/seo-deploy"},"next":{"title":".htaccess File Code for SEO","permalink":"/news-doc/docs/web/htaccess-file-code-forSeo"}}');var r=s(4848),i=s(8453);const o={sidebar_position:13},c="NextJS Deployment",a={},l=[{value:"Port Configuration",id:"port-configuration",level:2},{value:"Project Setup",id:"project-setup",level:2},{value:"Running the PM2 Server",id:"running-the-pm2-server",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"nextjs-deployment",children:"NextJS Deployment"})}),"\n",(0,r.jsx)(n.h2,{id:"port-configuration",children:"Port Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Before setting up the port, check available ports with this command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo lsof -i -P -n | grep 8003\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Port Occupied",src:s(211).A+"",width:"1676",height:"849"})}),"\n",(0,r.jsx)(n.p,{children:"If you see a response like above, it means this port is occupied by another project. Try other ports like 8000, 8001, 8002, etc."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Available Port",src:s(3087).A+"",width:"1676",height:"849"})}),"\n",(0,r.jsx)(n.p,{children:"If you get no response, it means the port is available and you can use it."}),"\n",(0,r.jsxs)(n.p,{children:["Now add the available port to your ",(0,r.jsx)(n.code,{children:"package.json"})," and ",(0,r.jsx)(n.code,{children:".htaccess"})," files:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Package JSON",src:s(3579).A+"",width:"1912",height:"991"})}),"\n",(0,r.jsx)(n.p,{children:"Copy the .htaccess file code and change the port number as needed."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Htaccess File",src:s(2055).A+"",width:"1606",height:"921"})}),"\n",(0,r.jsx)(n.h2,{id:"project-setup",children:"Project Setup"}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["Make sure you have ",(0,r.jsx)(n.code,{children:"node_modules"})," installed in your directory."]})}),"\n",(0,r.jsx)(n.p,{children:"Install project dependencies:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install\n"})}),"\n",(0,r.jsx)(n.p,{children:"This will install all the node modules in your directory."}),"\n",(0,r.jsx)(n.p,{children:"After that, build the production application:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm run build\n"})}),"\n",(0,r.jsx)(n.h2,{id:"running-the-pm2-server",children:"Running the PM2 Server"}),"\n",(0,r.jsx)(n.p,{children:"Go to the project root and start the PM2 server:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'pm2 start "npm start" -n "YOUR_PROJECT_NAME"\n'})}),"\n",(0,r.jsx)(n.p,{children:"Check if PM2 process is running correctly:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pm2 ls\n"})}),"\n",(0,r.jsxs)(n.p,{children:["When you run ",(0,r.jsx)(n.code,{children:"pm2 ls"}),", you will see one of two types of output:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Error:\n",(0,r.jsx)(n.img,{alt:"PM2 Error",src:s(5945).A+"",width:"1218",height:"101"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Success:\n",(0,r.jsx)(n.img,{alt:"PM2 Success",src:s(8747).A+"",width:"1212",height:"96"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["If you're getting errors, run ",(0,r.jsx)(n.code,{children:"pm2 logs"})," and check the error details."]}),"\n",(0,r.jsx)(n.p,{children:"If successful, set up a startup script to ensure PM2 restarts automatically after a system reboot:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pm2 startup\n"})}),"\n",(0,r.jsx)(n.p,{children:"After setting up PM2 with the startup command, save the current process list"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pm2 save\n"})}),"\n",(0,r.jsx)(n.p,{children:"If you want to restart your pm2 process then run pm2 restart id // Replace id with your process id"}),"\n",(0,r.jsxs)(n.p,{children:["For example here id is 0 in the above screenshot ",(0,r.jsx)(n.strong,{children:"pm2 restart 0"})]}),"\n",(0,r.jsx)(n.p,{children:"For deleting the previous project running in the PM2 server, use the following command"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'pm2 delete "YOUR_PROJECT_NAME"\n'})}),"\n",(0,r.jsx)(n.p,{children:"Your News Web application should now be running with full SEO capabilities."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},5945:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/news_pm2_eerror-31638d678f62f1e6d092b1bdef267c48.png"},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var t=s(6540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}},8747:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/news_pm2-1181ddc25d616c99a4e96b794509ae39.png"}}]);